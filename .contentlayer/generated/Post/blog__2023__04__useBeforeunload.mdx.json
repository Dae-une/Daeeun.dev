{
  "title": "실수로 인한 페이지 이탈 방지하기",
  "date": "2023-04-27",
  "summary": "실수로 인한 페이지 이탈을 방지하기",
  "tags": [
    "react"
  ],
  "body": {
    "raw": "\n프로젝트를 진행하던 중, 사용자가 작성해야 할 부분이 많은 페이지들이 몇몇 존재하였다.<br/>\n사용자가 작성을 하다가 실수로 뒤로가기 또는 새로고침을 할 경우, 이전에 작성하였던 내용이 다 사라지기 때문에<br/>\n이를 방지할 방법이 필요했다.\n\n분명 이에 대한 대비책이 마련되어 있을거라 생각을 하였고, 검색해본결과 `react-router`에서 `<Prompt/>` 라는 API를 제공하였다.<br/>\n하지만, 아쉽게도 v6로 업데이트 되면서 이 기능이 사라졌다고 한다.<br/>\n여전히 존재한다 해도, 커스텀이 불가능하였기에 이 기능은 사용하지 않았을듯 하다.<br/>\n\n# History\n\nHistory 는 브라우저의 이전 및 다음 페이지에 대한 정보를 저장하는 객체이다.<br/>\n이 객체는 브라우저의 주소 표시 줄과 함께 작동하며, 주소 표시 줄을 업데이트 하거나 브라우저에서 페이지를 이동할 때마다 업데이트 된다.<br/>\n\n이 정보는 스택으로 저장되어 있으며, 사용자가 뒤로가기 또는 앞으로가기 버튼을 클릭하거나 특정 URL을 입력하여 페이지를 탐색할 때마다 스택에 업데이트된다.<br/>\n\n## React Router, Browser\n\nhistory는 react router 에도 존재하고, Browser에도 존재한다.\n\n브라우저의 history는 사용자가 방문한 모든 웹 페이지의 기록을 관리하는 브라우저의 내장 기능이다.<br/>\n\n반면, react router의 history는 브라우저의 history를 추상화한 객체로, React 애플리케이션에서 라우팅을 관리하는데 사용된다.<br/>\n이 객체는 브라우저의 history와 유사하게 동작하지만, react router의 라우터가 라우팅을 처리하고, 브라우저의 URL을 업데이트하는데 사용된다.<br/>\nreact router의 history 는 브라우저의 history와 달리, 브라우저의 기록을 직접 수정하지 않고, 애플리케이션 내에서만 사용이 된다.\n\n즉, React Router의 history는 React 애플리케이션에서 라우팅을 관리하는 데 사용되고<br/>\n브라우저의 history는 브라우저에서 사용자의 웹 페이지 방문 기록을 관리하는 데 사용된다\n\n하지만 React Router의 history도 v6로 올라오면서 사라져버렸고, 별도로 설치를 해야한다<br/>\n나는 브라우저의 history를 이용하기로 하였다.\n\n아래는 브라우저의 history를 콘솔에 찍었을 때의 이미지 이다.\n\n<img src=\"/static/useBeforeunload/history.png\" alt=\"history\" width=\"50%\" loading=\"lazy\" />\n\n## popstate\n\n`popstate` 이벤트는 브라우저의 히스토리 스택이 변경될 때 발생하는 이벤트이다.<br/>\n예를 들어, 브라우저에서 뒤로가기 버튼을 클릭하거나, `history.back()` 함수를 호출하면 히스토리 스택이 변경되며, 이때 'popstate'이벤트가 발동한다.<br/>\n\n'popstate'이벤트는 window 객체의 'popstate'메서드를 호출하여 수동으로 발생 시킬 수도 있다.<br/>\n이렇게 하면 히스토리에 스택이 변경되지 않아도, 'popstate'이벤트를 발생시킬 수 있다.<br/>\n\n또는 'addEventListener' 메서드를 이용하여 등록할 수 있다.<br/>\n등록된 핸들러는 히스토리 스택이 변경될 때마다 호출이 된다.<br/>\n'popstate'이벤트 객체는 'state'의 속성을 가지며, 이 속성은 'pushState'와 'replaceState' 메서드에서 전달된 상태 객체를 나타낸다.<br/>\n\n### pushState\n\n'pushState'메소드는 새로운 항목을 세션 히스토리에 추가한다.<br/>\n이 메서드는 브라우저의 URL의 경로, 쿼리 매개 변수 및 해시 값과 함께 새로운 항목을 만들 수 있다.<br/>\n\n```jsx\nwindow.history.pushState(state, 'title', [, url]);\n```\n\n'pushState'의 첫 번째 인수는 상태 객체이며, 두번째 인수는 페이지의 제목이고, 세번째 인수는 URL주소 이다.<br/>\n\n### replaceState\n\n'replaceState' 메서드는 새로운 URL을 사용하여 기존 항목을 변경한다.<br/>\n'pushState'와 마찬가지로 같은 매개변수를 받는다.\n\n```jsx\nwindow.history.replaceState(state, 'title', [, url]);\n```\n\n## beforeunload\n\n`beforeunload` 이벤트는 페이지를 떠날 때 실행되는 이벤트이며, 이 이벤트를 이용하여 페이지를 떠날 때 사용자에게 경고 메세지를 보여줄 수 있다.<br/>\n하지만, 새로고침을 막기 위해선 시스템 알럿을 사용할 수 밖에 없다.<br/>\n\n# 전체 코드\n\n```jsx\nimport { useEffect } from 'react';\nimport { PREVENT_MESSAGE } from '../constants/Prevent';\nimport usePopup from './PopUp/usePopUp';\n\ninterface usePreventEventProps {\n  when: boolean;\n}\n\nconst useBeforeunload = ({ when }: usePreventEventProps) => {\n  const { openPopup, closePopup } = usePopup();\n\n  const handleConfirm = () => {\n    closePopup();\n    history.back();\n  };\n\n  const preventGoBack = () => {\n    openPopup({\n      message: PREVENT_MESSAGE,\n      confirmText: '확인',\n      cancelText: '취소',\n      handleConfirm: handleConfirm,\n      handleClose: closePopup,\n    });\n  };\n\n  const blockRefresh = (event: BeforeUnloadEvent) => {\n    event.preventDefault();\n    event.returnValue = '';\n  };\n\n  useEffect(() => {\n    if (!when) return;\n    window.addEventListener('beforeunload', blockRefresh);\n    return () => {\n      window.removeEventListener('beforeunload', blockRefresh);\n    };\n  }, [when]);\n\n  useEffect(() => {\n    if (!when) return;\n    history.pushState(null, '', location.pathname);\n    window.addEventListener('popstate', preventGoBack);\n    return () => {\n      window.removeEventListener('popstate', preventGoBack);\n    };\n  }, [when]);\n};\n\nexport default useBeforeunload;\n```\n",
    "code": "var Component=(()=>{var p=Object.create;var r=Object.defineProperty;var d=Object.getOwnPropertyDescriptor;var m=Object.getOwnPropertyNames;var u=Object.getPrototypeOf,N=Object.prototype.hasOwnProperty;var j=(s,n)=>()=>(n||s((n={exports:{}}).exports,n),n.exports),f=(s,n)=>{for(var a in n)r(s,a,{get:n[a],enumerable:!0})},t=(s,n,a,c)=>{if(n&&typeof n==\"object\"||typeof n==\"function\")for(let l of m(n))!N.call(s,l)&&l!==a&&r(s,l,{get:()=>n[l],enumerable:!(c=d(n,l))||c.enumerable});return s};var b=(s,n,a)=>(a=s!=null?p(u(s)):{},t(n||!s||!s.__esModule?r(a,\"default\",{value:s,enumerable:!0}):a,s)),y=s=>t(r({},\"__esModule\",{value:!0}),s);var i=j((E,h)=>{h.exports=_jsx_runtime});var k={};f(k,{default:()=>_,frontmatter:()=>w});var e=b(i()),w={title:\"\\uC2E4\\uC218\\uB85C \\uC778\\uD55C \\uD398\\uC774\\uC9C0 \\uC774\\uD0C8 \\uBC29\\uC9C0\\uD558\\uAE30\",date:new Date(16825536e5),summary:\"\\uC2E4\\uC218\\uB85C \\uC778\\uD55C \\uD398\\uC774\\uC9C0 \\uC774\\uD0C8\\uC744 \\uBC29\\uC9C0\\uD558\\uAE30\",tags:[\"react\"]};function o(s){let n=Object.assign({p:\"p\",code:\"code\",h1:\"h1\",a:\"a\",span:\"span\",h2:\"h2\",h3:\"h3\",pre:\"pre\"},s.components);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(n.p,{children:[\"\\uD504\\uB85C\\uC81D\\uD2B8\\uB97C \\uC9C4\\uD589\\uD558\\uB358 \\uC911, \\uC0AC\\uC6A9\\uC790\\uAC00 \\uC791\\uC131\\uD574\\uC57C \\uD560 \\uBD80\\uBD84\\uC774 \\uB9CE\\uC740 \\uD398\\uC774\\uC9C0\\uB4E4\\uC774 \\uBA87\\uBA87 \\uC874\\uC7AC\\uD558\\uC600\\uB2E4.\",(0,e.jsx)(\"br\",{}),`\n\\uC0AC\\uC6A9\\uC790\\uAC00 \\uC791\\uC131\\uC744 \\uD558\\uB2E4\\uAC00 \\uC2E4\\uC218\\uB85C \\uB4A4\\uB85C\\uAC00\\uAE30 \\uB610\\uB294 \\uC0C8\\uB85C\\uACE0\\uCE68\\uC744 \\uD560 \\uACBD\\uC6B0, \\uC774\\uC804\\uC5D0 \\uC791\\uC131\\uD558\\uC600\\uB358 \\uB0B4\\uC6A9\\uC774 \\uB2E4 \\uC0AC\\uB77C\\uC9C0\\uAE30 \\uB54C\\uBB38\\uC5D0`,(0,e.jsx)(\"br\",{}),`\n\\uC774\\uB97C \\uBC29\\uC9C0\\uD560 \\uBC29\\uBC95\\uC774 \\uD544\\uC694\\uD588\\uB2E4.`]}),`\n`,(0,e.jsxs)(n.p,{children:[\"\\uBD84\\uBA85 \\uC774\\uC5D0 \\uB300\\uD55C \\uB300\\uBE44\\uCC45\\uC774 \\uB9C8\\uB828\\uB418\\uC5B4 \\uC788\\uC744\\uAC70\\uB77C \\uC0DD\\uAC01\\uC744 \\uD558\\uC600\\uACE0, \\uAC80\\uC0C9\\uD574\\uBCF8\\uACB0\\uACFC \",(0,e.jsx)(n.code,{children:\"react-router\"}),\"\\uC5D0\\uC11C \",(0,e.jsx)(n.code,{children:\"<Prompt/>\"}),\" \\uB77C\\uB294 API\\uB97C \\uC81C\\uACF5\\uD558\\uC600\\uB2E4.\",(0,e.jsx)(\"br\",{}),`\n\\uD558\\uC9C0\\uB9CC, \\uC544\\uC27D\\uAC8C\\uB3C4 v6\\uB85C \\uC5C5\\uB370\\uC774\\uD2B8 \\uB418\\uBA74\\uC11C \\uC774 \\uAE30\\uB2A5\\uC774 \\uC0AC\\uB77C\\uC84C\\uB2E4\\uACE0 \\uD55C\\uB2E4.`,(0,e.jsx)(\"br\",{}),`\n\\uC5EC\\uC804\\uD788 \\uC874\\uC7AC\\uD55C\\uB2E4 \\uD574\\uB3C4, \\uCEE4\\uC2A4\\uD140\\uC774 \\uBD88\\uAC00\\uB2A5\\uD558\\uC600\\uAE30\\uC5D0 \\uC774 \\uAE30\\uB2A5\\uC740 \\uC0AC\\uC6A9\\uD558\\uC9C0 \\uC54A\\uC558\\uC744\\uB4EF \\uD558\\uB2E4.`,(0,e.jsx)(\"br\",{})]}),`\n`,(0,e.jsxs)(n.h1,{id:\"history\",children:[(0,e.jsx)(n.a,{className:\"anchor\",href:\"#history\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"History\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"History \\uB294 \\uBE0C\\uB77C\\uC6B0\\uC800\\uC758 \\uC774\\uC804 \\uBC0F \\uB2E4\\uC74C \\uD398\\uC774\\uC9C0\\uC5D0 \\uB300\\uD55C \\uC815\\uBCF4\\uB97C \\uC800\\uC7A5\\uD558\\uB294 \\uAC1D\\uCCB4\\uC774\\uB2E4.\",(0,e.jsx)(\"br\",{}),`\n\\uC774 \\uAC1D\\uCCB4\\uB294 \\uBE0C\\uB77C\\uC6B0\\uC800\\uC758 \\uC8FC\\uC18C \\uD45C\\uC2DC \\uC904\\uACFC \\uD568\\uAED8 \\uC791\\uB3D9\\uD558\\uBA70, \\uC8FC\\uC18C \\uD45C\\uC2DC \\uC904\\uC744 \\uC5C5\\uB370\\uC774\\uD2B8 \\uD558\\uAC70\\uB098 \\uBE0C\\uB77C\\uC6B0\\uC800\\uC5D0\\uC11C \\uD398\\uC774\\uC9C0\\uB97C \\uC774\\uB3D9\\uD560 \\uB54C\\uB9C8\\uB2E4 \\uC5C5\\uB370\\uC774\\uD2B8 \\uB41C\\uB2E4.`,(0,e.jsx)(\"br\",{})]}),`\n`,(0,e.jsxs)(n.p,{children:[\"\\uC774 \\uC815\\uBCF4\\uB294 \\uC2A4\\uD0DD\\uC73C\\uB85C \\uC800\\uC7A5\\uB418\\uC5B4 \\uC788\\uC73C\\uBA70, \\uC0AC\\uC6A9\\uC790\\uAC00 \\uB4A4\\uB85C\\uAC00\\uAE30 \\uB610\\uB294 \\uC55E\\uC73C\\uB85C\\uAC00\\uAE30 \\uBC84\\uD2BC\\uC744 \\uD074\\uB9AD\\uD558\\uAC70\\uB098 \\uD2B9\\uC815 URL\\uC744 \\uC785\\uB825\\uD558\\uC5EC \\uD398\\uC774\\uC9C0\\uB97C \\uD0D0\\uC0C9\\uD560 \\uB54C\\uB9C8\\uB2E4 \\uC2A4\\uD0DD\\uC5D0 \\uC5C5\\uB370\\uC774\\uD2B8\\uB41C\\uB2E4.\",(0,e.jsx)(\"br\",{})]}),`\n`,(0,e.jsxs)(n.h2,{id:\"react-router-browser\",children:[(0,e.jsx)(n.a,{className:\"anchor\",href:\"#react-router-browser\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"React Router, Browser\"]}),`\n`,(0,e.jsx)(n.p,{children:\"history\\uB294 react router \\uC5D0\\uB3C4 \\uC874\\uC7AC\\uD558\\uACE0, Browser\\uC5D0\\uB3C4 \\uC874\\uC7AC\\uD55C\\uB2E4.\"}),`\n`,(0,e.jsxs)(n.p,{children:[\"\\uBE0C\\uB77C\\uC6B0\\uC800\\uC758 history\\uB294 \\uC0AC\\uC6A9\\uC790\\uAC00 \\uBC29\\uBB38\\uD55C \\uBAA8\\uB4E0 \\uC6F9 \\uD398\\uC774\\uC9C0\\uC758 \\uAE30\\uB85D\\uC744 \\uAD00\\uB9AC\\uD558\\uB294 \\uBE0C\\uB77C\\uC6B0\\uC800\\uC758 \\uB0B4\\uC7A5 \\uAE30\\uB2A5\\uC774\\uB2E4.\",(0,e.jsx)(\"br\",{})]}),`\n`,(0,e.jsxs)(n.p,{children:[\"\\uBC18\\uBA74, react router\\uC758 history\\uB294 \\uBE0C\\uB77C\\uC6B0\\uC800\\uC758 history\\uB97C \\uCD94\\uC0C1\\uD654\\uD55C \\uAC1D\\uCCB4\\uB85C, React \\uC560\\uD50C\\uB9AC\\uCF00\\uC774\\uC158\\uC5D0\\uC11C \\uB77C\\uC6B0\\uD305\\uC744 \\uAD00\\uB9AC\\uD558\\uB294\\uB370 \\uC0AC\\uC6A9\\uB41C\\uB2E4.\",(0,e.jsx)(\"br\",{}),`\n\\uC774 \\uAC1D\\uCCB4\\uB294 \\uBE0C\\uB77C\\uC6B0\\uC800\\uC758 history\\uC640 \\uC720\\uC0AC\\uD558\\uAC8C \\uB3D9\\uC791\\uD558\\uC9C0\\uB9CC, react router\\uC758 \\uB77C\\uC6B0\\uD130\\uAC00 \\uB77C\\uC6B0\\uD305\\uC744 \\uCC98\\uB9AC\\uD558\\uACE0, \\uBE0C\\uB77C\\uC6B0\\uC800\\uC758 URL\\uC744 \\uC5C5\\uB370\\uC774\\uD2B8\\uD558\\uB294\\uB370 \\uC0AC\\uC6A9\\uB41C\\uB2E4.`,(0,e.jsx)(\"br\",{}),`\nreact router\\uC758 history \\uB294 \\uBE0C\\uB77C\\uC6B0\\uC800\\uC758 history\\uC640 \\uB2EC\\uB9AC, \\uBE0C\\uB77C\\uC6B0\\uC800\\uC758 \\uAE30\\uB85D\\uC744 \\uC9C1\\uC811 \\uC218\\uC815\\uD558\\uC9C0 \\uC54A\\uACE0, \\uC560\\uD50C\\uB9AC\\uCF00\\uC774\\uC158 \\uB0B4\\uC5D0\\uC11C\\uB9CC \\uC0AC\\uC6A9\\uC774 \\uB41C\\uB2E4.`]}),`\n`,(0,e.jsxs)(n.p,{children:[\"\\uC989, React Router\\uC758 history\\uB294 React \\uC560\\uD50C\\uB9AC\\uCF00\\uC774\\uC158\\uC5D0\\uC11C \\uB77C\\uC6B0\\uD305\\uC744 \\uAD00\\uB9AC\\uD558\\uB294 \\uB370 \\uC0AC\\uC6A9\\uB418\\uACE0\",(0,e.jsx)(\"br\",{}),`\n\\uBE0C\\uB77C\\uC6B0\\uC800\\uC758 history\\uB294 \\uBE0C\\uB77C\\uC6B0\\uC800\\uC5D0\\uC11C \\uC0AC\\uC6A9\\uC790\\uC758 \\uC6F9 \\uD398\\uC774\\uC9C0 \\uBC29\\uBB38 \\uAE30\\uB85D\\uC744 \\uAD00\\uB9AC\\uD558\\uB294 \\uB370 \\uC0AC\\uC6A9\\uB41C\\uB2E4`]}),`\n`,(0,e.jsxs)(n.p,{children:[\"\\uD558\\uC9C0\\uB9CC React Router\\uC758 history\\uB3C4 v6\\uB85C \\uC62C\\uB77C\\uC624\\uBA74\\uC11C \\uC0AC\\uB77C\\uC838\\uBC84\\uB838\\uACE0, \\uBCC4\\uB3C4\\uB85C \\uC124\\uCE58\\uB97C \\uD574\\uC57C\\uD55C\\uB2E4\",(0,e.jsx)(\"br\",{}),`\n\\uB098\\uB294 \\uBE0C\\uB77C\\uC6B0\\uC800\\uC758 history\\uB97C \\uC774\\uC6A9\\uD558\\uAE30\\uB85C \\uD558\\uC600\\uB2E4.`]}),`\n`,(0,e.jsx)(n.p,{children:\"\\uC544\\uB798\\uB294 \\uBE0C\\uB77C\\uC6B0\\uC800\\uC758 history\\uB97C \\uCF58\\uC194\\uC5D0 \\uCC0D\\uC5C8\\uC744 \\uB54C\\uC758 \\uC774\\uBBF8\\uC9C0 \\uC774\\uB2E4.\"}),`\n`,(0,e.jsx)(\"img\",{src:\"/static/useBeforeunload/history.png\",alt:\"history\",width:\"50%\",loading:\"lazy\"}),`\n`,(0,e.jsxs)(n.h2,{id:\"popstate\",children:[(0,e.jsx)(n.a,{className:\"anchor\",href:\"#popstate\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"popstate\"]}),`\n`,(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.code,{children:\"popstate\"}),\" \\uC774\\uBCA4\\uD2B8\\uB294 \\uBE0C\\uB77C\\uC6B0\\uC800\\uC758 \\uD788\\uC2A4\\uD1A0\\uB9AC \\uC2A4\\uD0DD\\uC774 \\uBCC0\\uACBD\\uB420 \\uB54C \\uBC1C\\uC0DD\\uD558\\uB294 \\uC774\\uBCA4\\uD2B8\\uC774\\uB2E4.\",(0,e.jsx)(\"br\",{}),`\n\\uC608\\uB97C \\uB4E4\\uC5B4, \\uBE0C\\uB77C\\uC6B0\\uC800\\uC5D0\\uC11C \\uB4A4\\uB85C\\uAC00\\uAE30 \\uBC84\\uD2BC\\uC744 \\uD074\\uB9AD\\uD558\\uAC70\\uB098, `,(0,e.jsx)(n.code,{children:\"history.back()\"}),\" \\uD568\\uC218\\uB97C \\uD638\\uCD9C\\uD558\\uBA74 \\uD788\\uC2A4\\uD1A0\\uB9AC \\uC2A4\\uD0DD\\uC774 \\uBCC0\\uACBD\\uB418\\uBA70, \\uC774\\uB54C 'popstate'\\uC774\\uBCA4\\uD2B8\\uAC00 \\uBC1C\\uB3D9\\uD55C\\uB2E4.\",(0,e.jsx)(\"br\",{})]}),`\n`,(0,e.jsxs)(n.p,{children:[\"'popstate'\\uC774\\uBCA4\\uD2B8\\uB294 window \\uAC1D\\uCCB4\\uC758 'popstate'\\uBA54\\uC11C\\uB4DC\\uB97C \\uD638\\uCD9C\\uD558\\uC5EC \\uC218\\uB3D9\\uC73C\\uB85C \\uBC1C\\uC0DD \\uC2DC\\uD0AC \\uC218\\uB3C4 \\uC788\\uB2E4.\",(0,e.jsx)(\"br\",{}),`\n\\uC774\\uB807\\uAC8C \\uD558\\uBA74 \\uD788\\uC2A4\\uD1A0\\uB9AC\\uC5D0 \\uC2A4\\uD0DD\\uC774 \\uBCC0\\uACBD\\uB418\\uC9C0 \\uC54A\\uC544\\uB3C4, 'popstate'\\uC774\\uBCA4\\uD2B8\\uB97C \\uBC1C\\uC0DD\\uC2DC\\uD0AC \\uC218 \\uC788\\uB2E4.`,(0,e.jsx)(\"br\",{})]}),`\n`,(0,e.jsxs)(n.p,{children:[\"\\uB610\\uB294 'addEventListener' \\uBA54\\uC11C\\uB4DC\\uB97C \\uC774\\uC6A9\\uD558\\uC5EC \\uB4F1\\uB85D\\uD560 \\uC218 \\uC788\\uB2E4.\",(0,e.jsx)(\"br\",{}),`\n\\uB4F1\\uB85D\\uB41C \\uD578\\uB4E4\\uB7EC\\uB294 \\uD788\\uC2A4\\uD1A0\\uB9AC \\uC2A4\\uD0DD\\uC774 \\uBCC0\\uACBD\\uB420 \\uB54C\\uB9C8\\uB2E4 \\uD638\\uCD9C\\uC774 \\uB41C\\uB2E4.`,(0,e.jsx)(\"br\",{}),`\n'popstate'\\uC774\\uBCA4\\uD2B8 \\uAC1D\\uCCB4\\uB294 'state'\\uC758 \\uC18D\\uC131\\uC744 \\uAC00\\uC9C0\\uBA70, \\uC774 \\uC18D\\uC131\\uC740 'pushState'\\uC640 'replaceState' \\uBA54\\uC11C\\uB4DC\\uC5D0\\uC11C \\uC804\\uB2EC\\uB41C \\uC0C1\\uD0DC \\uAC1D\\uCCB4\\uB97C \\uB098\\uD0C0\\uB0B8\\uB2E4.`,(0,e.jsx)(\"br\",{})]}),`\n`,(0,e.jsxs)(n.h3,{id:\"pushstate\",children:[(0,e.jsx)(n.a,{className:\"anchor\",href:\"#pushstate\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"pushState\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"'pushState'\\uBA54\\uC18C\\uB4DC\\uB294 \\uC0C8\\uB85C\\uC6B4 \\uD56D\\uBAA9\\uC744 \\uC138\\uC158 \\uD788\\uC2A4\\uD1A0\\uB9AC\\uC5D0 \\uCD94\\uAC00\\uD55C\\uB2E4.\",(0,e.jsx)(\"br\",{}),`\n\\uC774 \\uBA54\\uC11C\\uB4DC\\uB294 \\uBE0C\\uB77C\\uC6B0\\uC800\\uC758 URL\\uC758 \\uACBD\\uB85C, \\uCFFC\\uB9AC \\uB9E4\\uAC1C \\uBCC0\\uC218 \\uBC0F \\uD574\\uC2DC \\uAC12\\uACFC \\uD568\\uAED8 \\uC0C8\\uB85C\\uC6B4 \\uD56D\\uBAA9\\uC744 \\uB9CC\\uB4E4 \\uC218 \\uC788\\uB2E4.`,(0,e.jsx)(\"br\",{})]}),`\n`,(0,e.jsx)(n.pre,{children:(0,e.jsxs)(n.code,{className:\"hljs language-jsx\",children:[(0,e.jsx)(n.span,{className:\"hljs-variable language_\",children:\"window\"}),\".\",(0,e.jsx)(n.span,{className:\"hljs-property\",children:\"history\"}),\".\",(0,e.jsx)(n.span,{className:\"hljs-title function_\",children:\"pushState\"}),\"(state, \",(0,e.jsx)(n.span,{className:\"hljs-string\",children:\"'title'\"}),`, [, url]);\n`]})}),`\n`,(0,e.jsxs)(n.p,{children:[\"'pushState'\\uC758 \\uCCAB \\uBC88\\uC9F8 \\uC778\\uC218\\uB294 \\uC0C1\\uD0DC \\uAC1D\\uCCB4\\uC774\\uBA70, \\uB450\\uBC88\\uC9F8 \\uC778\\uC218\\uB294 \\uD398\\uC774\\uC9C0\\uC758 \\uC81C\\uBAA9\\uC774\\uACE0, \\uC138\\uBC88\\uC9F8 \\uC778\\uC218\\uB294 URL\\uC8FC\\uC18C \\uC774\\uB2E4.\",(0,e.jsx)(\"br\",{})]}),`\n`,(0,e.jsxs)(n.h3,{id:\"replacestate\",children:[(0,e.jsx)(n.a,{className:\"anchor\",href:\"#replacestate\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"replaceState\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"'replaceState' \\uBA54\\uC11C\\uB4DC\\uB294 \\uC0C8\\uB85C\\uC6B4 URL\\uC744 \\uC0AC\\uC6A9\\uD558\\uC5EC \\uAE30\\uC874 \\uD56D\\uBAA9\\uC744 \\uBCC0\\uACBD\\uD55C\\uB2E4.\",(0,e.jsx)(\"br\",{}),`\n'pushState'\\uC640 \\uB9C8\\uCC2C\\uAC00\\uC9C0\\uB85C \\uAC19\\uC740 \\uB9E4\\uAC1C\\uBCC0\\uC218\\uB97C \\uBC1B\\uB294\\uB2E4.`]}),`\n`,(0,e.jsx)(n.pre,{children:(0,e.jsxs)(n.code,{className:\"hljs language-jsx\",children:[(0,e.jsx)(n.span,{className:\"hljs-variable language_\",children:\"window\"}),\".\",(0,e.jsx)(n.span,{className:\"hljs-property\",children:\"history\"}),\".\",(0,e.jsx)(n.span,{className:\"hljs-title function_\",children:\"replaceState\"}),\"(state, \",(0,e.jsx)(n.span,{className:\"hljs-string\",children:\"'title'\"}),`, [, url]);\n`]})}),`\n`,(0,e.jsxs)(n.h2,{id:\"beforeunload\",children:[(0,e.jsx)(n.a,{className:\"anchor\",href:\"#beforeunload\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"beforeunload\"]}),`\n`,(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.code,{children:\"beforeunload\"}),\" \\uC774\\uBCA4\\uD2B8\\uB294 \\uD398\\uC774\\uC9C0\\uB97C \\uB5A0\\uB0A0 \\uB54C \\uC2E4\\uD589\\uB418\\uB294 \\uC774\\uBCA4\\uD2B8\\uC774\\uBA70, \\uC774 \\uC774\\uBCA4\\uD2B8\\uB97C \\uC774\\uC6A9\\uD558\\uC5EC \\uD398\\uC774\\uC9C0\\uB97C \\uB5A0\\uB0A0 \\uB54C \\uC0AC\\uC6A9\\uC790\\uC5D0\\uAC8C \\uACBD\\uACE0 \\uBA54\\uC138\\uC9C0\\uB97C \\uBCF4\\uC5EC\\uC904 \\uC218 \\uC788\\uB2E4.\",(0,e.jsx)(\"br\",{}),`\n\\uD558\\uC9C0\\uB9CC, \\uC0C8\\uB85C\\uACE0\\uCE68\\uC744 \\uB9C9\\uAE30 \\uC704\\uD574\\uC120 \\uC2DC\\uC2A4\\uD15C \\uC54C\\uB7FF\\uC744 \\uC0AC\\uC6A9\\uD560 \\uC218 \\uBC16\\uC5D0 \\uC5C6\\uB2E4.`,(0,e.jsx)(\"br\",{})]}),`\n`,(0,e.jsxs)(n.h1,{id:\"\\uC804\\uCCB4-\\uCF54\\uB4DC\",children:[(0,e.jsx)(n.a,{className:\"anchor\",href:\"#\\uC804\\uCCB4-\\uCF54\\uB4DC\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\uC804\\uCCB4 \\uCF54\\uB4DC\"]}),`\n`,(0,e.jsx)(n.pre,{children:(0,e.jsxs)(n.code,{className:\"hljs language-jsx\",children:[(0,e.jsx)(n.span,{className:\"hljs-keyword\",children:\"import\"}),\" { useEffect } \",(0,e.jsx)(n.span,{className:\"hljs-keyword\",children:\"from\"}),\" \",(0,e.jsx)(n.span,{className:\"hljs-string\",children:\"'react'\"}),`;\n`,(0,e.jsx)(n.span,{className:\"hljs-keyword\",children:\"import\"}),\" { \",(0,e.jsx)(n.span,{className:\"hljs-variable constant_\",children:\"PREVENT_MESSAGE\"}),\" } \",(0,e.jsx)(n.span,{className:\"hljs-keyword\",children:\"from\"}),\" \",(0,e.jsx)(n.span,{className:\"hljs-string\",children:\"'../constants/Prevent'\"}),`;\n`,(0,e.jsx)(n.span,{className:\"hljs-keyword\",children:\"import\"}),\" usePopup \",(0,e.jsx)(n.span,{className:\"hljs-keyword\",children:\"from\"}),\" \",(0,e.jsx)(n.span,{className:\"hljs-string\",children:\"'./PopUp/usePopUp'\"}),`;\n\ninterface usePreventEventProps {\n  `,(0,e.jsx)(n.span,{className:\"hljs-attr\",children:\"when\"}),`: boolean;\n}\n\n`,(0,e.jsx)(n.span,{className:\"hljs-keyword\",children:\"const\"}),\" \",(0,e.jsx)(n.span,{className:\"hljs-title function_\",children:\"useBeforeunload\"}),\" = (\",(0,e.jsx)(n.span,{className:\"hljs-params\",children:\"{ when }: usePreventEventProps\"}),`) => {\n  `,(0,e.jsx)(n.span,{className:\"hljs-keyword\",children:\"const\"}),\" { openPopup, closePopup } = \",(0,e.jsx)(n.span,{className:\"hljs-title function_\",children:\"usePopup\"}),`();\n\n  `,(0,e.jsx)(n.span,{className:\"hljs-keyword\",children:\"const\"}),\" \",(0,e.jsx)(n.span,{className:\"hljs-title function_\",children:\"handleConfirm\"}),\" = (\",(0,e.jsx)(n.span,{className:\"hljs-params\"}),`) => {\n    `,(0,e.jsx)(n.span,{className:\"hljs-title function_\",children:\"closePopup\"}),`();\n    history.`,(0,e.jsx)(n.span,{className:\"hljs-title function_\",children:\"back\"}),`();\n  };\n\n  `,(0,e.jsx)(n.span,{className:\"hljs-keyword\",children:\"const\"}),\" \",(0,e.jsx)(n.span,{className:\"hljs-title function_\",children:\"preventGoBack\"}),\" = (\",(0,e.jsx)(n.span,{className:\"hljs-params\"}),`) => {\n    `,(0,e.jsx)(n.span,{className:\"hljs-title function_\",children:\"openPopup\"}),`({\n      `,(0,e.jsx)(n.span,{className:\"hljs-attr\",children:\"message\"}),\": \",(0,e.jsx)(n.span,{className:\"hljs-variable constant_\",children:\"PREVENT_MESSAGE\"}),`,\n      `,(0,e.jsx)(n.span,{className:\"hljs-attr\",children:\"confirmText\"}),\": \",(0,e.jsx)(n.span,{className:\"hljs-string\",children:\"'\\uD655\\uC778'\"}),`,\n      `,(0,e.jsx)(n.span,{className:\"hljs-attr\",children:\"cancelText\"}),\": \",(0,e.jsx)(n.span,{className:\"hljs-string\",children:\"'\\uCDE8\\uC18C'\"}),`,\n      `,(0,e.jsx)(n.span,{className:\"hljs-attr\",children:\"handleConfirm\"}),`: handleConfirm,\n      `,(0,e.jsx)(n.span,{className:\"hljs-attr\",children:\"handleClose\"}),`: closePopup,\n    });\n  };\n\n  `,(0,e.jsx)(n.span,{className:\"hljs-keyword\",children:\"const\"}),\" \",(0,e.jsx)(n.span,{className:\"hljs-title function_\",children:\"blockRefresh\"}),\" = (\",(0,e.jsx)(n.span,{className:\"hljs-params\",children:\"event: BeforeUnloadEvent\"}),`) => {\n    event.`,(0,e.jsx)(n.span,{className:\"hljs-title function_\",children:\"preventDefault\"}),`();\n    event.`,(0,e.jsx)(n.span,{className:\"hljs-property\",children:\"returnValue\"}),\" = \",(0,e.jsx)(n.span,{className:\"hljs-string\",children:\"''\"}),`;\n  };\n\n  `,(0,e.jsx)(n.span,{className:\"hljs-title function_\",children:\"useEffect\"}),\"(\",(0,e.jsx)(n.span,{className:\"hljs-function\",children:\"() =>\"}),` {\n    `,(0,e.jsx)(n.span,{className:\"hljs-keyword\",children:\"if\"}),\" (!when) \",(0,e.jsx)(n.span,{className:\"hljs-keyword\",children:\"return\"}),`;\n    `,(0,e.jsx)(n.span,{className:\"hljs-variable language_\",children:\"window\"}),\".\",(0,e.jsx)(n.span,{className:\"hljs-title function_\",children:\"addEventListener\"}),\"(\",(0,e.jsx)(n.span,{className:\"hljs-string\",children:\"'beforeunload'\"}),`, blockRefresh);\n    `,(0,e.jsx)(n.span,{className:\"hljs-keyword\",children:\"return\"}),\" \",(0,e.jsx)(n.span,{className:\"hljs-function\",children:\"() =>\"}),` {\n      `,(0,e.jsx)(n.span,{className:\"hljs-variable language_\",children:\"window\"}),\".\",(0,e.jsx)(n.span,{className:\"hljs-title function_\",children:\"removeEventListener\"}),\"(\",(0,e.jsx)(n.span,{className:\"hljs-string\",children:\"'beforeunload'\"}),`, blockRefresh);\n    };\n  }, [when]);\n\n  `,(0,e.jsx)(n.span,{className:\"hljs-title function_\",children:\"useEffect\"}),\"(\",(0,e.jsx)(n.span,{className:\"hljs-function\",children:\"() =>\"}),` {\n    `,(0,e.jsx)(n.span,{className:\"hljs-keyword\",children:\"if\"}),\" (!when) \",(0,e.jsx)(n.span,{className:\"hljs-keyword\",children:\"return\"}),`;\n    history.`,(0,e.jsx)(n.span,{className:\"hljs-title function_\",children:\"pushState\"}),\"(\",(0,e.jsx)(n.span,{className:\"hljs-literal\",children:\"null\"}),\", \",(0,e.jsx)(n.span,{className:\"hljs-string\",children:\"''\"}),\", location.\",(0,e.jsx)(n.span,{className:\"hljs-property\",children:\"pathname\"}),`);\n    `,(0,e.jsx)(n.span,{className:\"hljs-variable language_\",children:\"window\"}),\".\",(0,e.jsx)(n.span,{className:\"hljs-title function_\",children:\"addEventListener\"}),\"(\",(0,e.jsx)(n.span,{className:\"hljs-string\",children:\"'popstate'\"}),`, preventGoBack);\n    `,(0,e.jsx)(n.span,{className:\"hljs-keyword\",children:\"return\"}),\" \",(0,e.jsx)(n.span,{className:\"hljs-function\",children:\"() =>\"}),` {\n      `,(0,e.jsx)(n.span,{className:\"hljs-variable language_\",children:\"window\"}),\".\",(0,e.jsx)(n.span,{className:\"hljs-title function_\",children:\"removeEventListener\"}),\"(\",(0,e.jsx)(n.span,{className:\"hljs-string\",children:\"'popstate'\"}),`, preventGoBack);\n    };\n  }, [when]);\n};\n\n`,(0,e.jsx)(n.span,{className:\"hljs-keyword\",children:\"export\"}),\" \",(0,e.jsx)(n.span,{className:\"hljs-keyword\",children:\"default\"}),` useBeforeunload;\n`]})})]})}function g(s={}){let{wrapper:n}=s.components||{};return n?(0,e.jsx)(n,Object.assign({},s,{children:(0,e.jsx)(o,s)})):o(s)}var _=g;return y(k);})();\n;return Component;"
  },
  "_id": "blog/2023/04/useBeforeunload.mdx",
  "_raw": {
    "sourceFilePath": "blog/2023/04/useBeforeunload.mdx",
    "sourceFileName": "useBeforeunload.mdx",
    "sourceFileDir": "blog/2023/04",
    "contentType": "mdx",
    "flattenedPath": "blog/2023/04/useBeforeunload"
  },
  "type": "Post",
  "slug": "useBeforeunload"
}