{
  "title": "popup hook 만들기",
  "date": "2023-05-02",
  "summary": "usePopup을 만들어 popup을 쉽게 띄워보자",
  "tags": [
    "react"
  ],
  "body": {
    "raw": "\n프로젝트를 진행하다보면 모달이나 팝업을 띄울 일이 많아진다.<br/>\n모달은 합성 컴포넌트로 만들어 사용하였으나, 팝업은 필요한 내용이 많이 없기에 hook을 이용하여 간단하게 띄울 수 없을까 라는 생각에서 시작하게되었다.<br/>\n\n어떤 방법으로 만들면 좋을까 라는 생각을 하다, 분명 이 정도라면 수요가 있을거고 라이브러리가 있지 않을까 라는 생각에 찾아보니,\n`react-hook-popup`라이브러리가 있었고, 이걸 그대로 사용하기 보단, 참고하여 직접 만들어 사용해보고 싶어졌다.<br/>\n\n# 전역으로 사용하기\n\n먼저, hook을 이용하여 컴포넌트를 띄워야 하기 때문에, 전역적으로 사용하기 위한 세팅이 필요했다.<br/>\nuseContext를 이용하여 만들까 하다, 프로젝트 내에서 `recoil`을 이용중이기에, `recoil`을 이용하여 필요한 데이터를 전달하기로 하였고,<br/>\n팝업을 모든 페이지내에서 사용할 수 있어야 하기에, `PopupJs`를 만들어 `App.tsx`에 넣어주었다.<br/>\n\n```jsx\nconst PopupJs = () => {\n  const popupProps = useRecoilValue(popupState);\n  const renderComponent = () => {\n    if (!popupProps) {\n      return null;\n    }\n\n    return <PopupComponent {...popupProps} />;\n  };\n\n  return <>{renderComponent()}</>;\n};\n```\n\n`PopupJs`는 간단하게, `recoil`에 넣은 데이터를 `<PopupComponent/>`에 전달하여 렌더링 하는 역할만을 진행한다.<br/>\n\n# 데이터 전달하기\n\n팝업에 필요한 데이터는 `recoil`을 이용하여 전달하기로 하였기에,<br/>\n\n```jsx\nexport interface PopUpStateType {\n  message: string;\n  confirmText: string;\n  cancelText?: string;\n  handleClose: (...arg: any[]) => any;\n  handleConfirm: (...arg: any[]) => any;\n  width?: string;\n  height?: string;\n}\n\nexport const popupState = atom<PopUpStateType | null>({\n  key: 'popupState',\n  default: null,\n});\n\n```\n\n`popupState`를 만들어 주었으며, 이를 hook으로 이용하여 팝업을 켜고, 끌 수 있도록 `usePopup`을 만들었다.<br/>\n\n```jsx\nconst usePopUp = () => {\n  const [popup, setPopup] = useRecoilState(popupState);\n\n  const openPopup = (props: PopUpStateType) => {\n    setPopup(props);\n  };\n\n  const closePopup = () => {\n    setPopup(null);\n  };\n\n  return { openPopup, closePopup };\n};\n\nexport default usePopUp;\n```\n\n`usePopUp`은 간단하게, recoil의 데이터를 변경 및 제거 하는 역할만 진행한다.<br/>\n\n# 사용하기\n\n```jsx\nconst { openPopup, closePopup } = usePopUp();\n\nopenPopup({\n  message: '팝업에 들어갈 메세지',\n  confirmText: '확인',\n  handleClose,\n  handleConfirm,,\n});\n```\n\n이렇게 하여 간단하게 usePopUp hook을 구현하여 사용해 볼 수 있다.<br/>\n이를 응용하면 다양한 팝업을 구현할 수 있다.",
    "code": "var Component=(()=>{var t=Object.create;var c=Object.defineProperty;var d=Object.getOwnPropertyDescriptor;var m=Object.getOwnPropertyNames;var j=Object.getPrototypeOf,u=Object.prototype.hasOwnProperty;var N=(e,s)=>()=>(s||e((s={exports:{}}).exports,s),s.exports),f=(e,s)=>{for(var a in s)c(e,a,{get:s[a],enumerable:!0})},p=(e,s,a,r)=>{if(s&&typeof s==\"object\"||typeof s==\"function\")for(let l of m(s))!u.call(e,l)&&l!==a&&c(e,l,{get:()=>s[l],enumerable:!(r=d(s,l))||r.enumerable});return e};var g=(e,s,a)=>(a=e!=null?t(j(e)):{},p(s||!e||!e.__esModule?c(a,\"default\",{value:e,enumerable:!0}):a,e)),k=e=>p(c({},\"__esModule\",{value:!0}),e);var o=N((b,h)=>{h.exports=_jsx_runtime});var w={};f(w,{default:()=>x,frontmatter:()=>y});var n=g(o()),y={title:\"popup hook \\uB9CC\\uB4E4\\uAE30\",date:new Date(16829856e5),summary:\"usePopup\\uC744 \\uB9CC\\uB4E4\\uC5B4 popup\\uC744 \\uC27D\\uAC8C \\uB744\\uC6CC\\uBCF4\\uC790\",tags:[\"react\"]};function i(e){let s=Object.assign({p:\"p\",code:\"code\",h1:\"h1\",a:\"a\",span:\"span\",pre:\"pre\"},e.components);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(s.p,{children:[\"\\uD504\\uB85C\\uC81D\\uD2B8\\uB97C \\uC9C4\\uD589\\uD558\\uB2E4\\uBCF4\\uBA74 \\uBAA8\\uB2EC\\uC774\\uB098 \\uD31D\\uC5C5\\uC744 \\uB744\\uC6B8 \\uC77C\\uC774 \\uB9CE\\uC544\\uC9C4\\uB2E4.\",(0,n.jsx)(\"br\",{}),`\n\\uBAA8\\uB2EC\\uC740 \\uD569\\uC131 \\uCEF4\\uD3EC\\uB10C\\uD2B8\\uB85C \\uB9CC\\uB4E4\\uC5B4 \\uC0AC\\uC6A9\\uD558\\uC600\\uC73C\\uB098, \\uD31D\\uC5C5\\uC740 \\uD544\\uC694\\uD55C \\uB0B4\\uC6A9\\uC774 \\uB9CE\\uC774 \\uC5C6\\uAE30\\uC5D0 hook\\uC744 \\uC774\\uC6A9\\uD558\\uC5EC \\uAC04\\uB2E8\\uD558\\uAC8C \\uB744\\uC6B8 \\uC218 \\uC5C6\\uC744\\uAE4C \\uB77C\\uB294 \\uC0DD\\uAC01\\uC5D0\\uC11C \\uC2DC\\uC791\\uD558\\uAC8C\\uB418\\uC5C8\\uB2E4.`,(0,n.jsx)(\"br\",{})]}),`\n`,(0,n.jsxs)(s.p,{children:[`\\uC5B4\\uB5A4 \\uBC29\\uBC95\\uC73C\\uB85C \\uB9CC\\uB4E4\\uBA74 \\uC88B\\uC744\\uAE4C \\uB77C\\uB294 \\uC0DD\\uAC01\\uC744 \\uD558\\uB2E4, \\uBD84\\uBA85 \\uC774 \\uC815\\uB3C4\\uB77C\\uBA74 \\uC218\\uC694\\uAC00 \\uC788\\uC744\\uAC70\\uACE0 \\uB77C\\uC774\\uBE0C\\uB7EC\\uB9AC\\uAC00 \\uC788\\uC9C0 \\uC54A\\uC744\\uAE4C \\uB77C\\uB294 \\uC0DD\\uAC01\\uC5D0 \\uCC3E\\uC544\\uBCF4\\uB2C8,\n`,(0,n.jsx)(s.code,{children:\"react-hook-popup\"}),\"\\uB77C\\uC774\\uBE0C\\uB7EC\\uB9AC\\uAC00 \\uC788\\uC5C8\\uACE0, \\uC774\\uAC78 \\uADF8\\uB300\\uB85C \\uC0AC\\uC6A9\\uD558\\uAE30 \\uBCF4\\uB2E8, \\uCC38\\uACE0\\uD558\\uC5EC \\uC9C1\\uC811 \\uB9CC\\uB4E4\\uC5B4 \\uC0AC\\uC6A9\\uD574\\uBCF4\\uACE0 \\uC2F6\\uC5B4\\uC84C\\uB2E4.\",(0,n.jsx)(\"br\",{})]}),`\n`,(0,n.jsxs)(s.h1,{id:\"\\uC804\\uC5ED\\uC73C\\uB85C-\\uC0AC\\uC6A9\\uD558\\uAE30\",children:[(0,n.jsx)(s.a,{className:\"anchor\",href:\"#\\uC804\\uC5ED\\uC73C\\uB85C-\\uC0AC\\uC6A9\\uD558\\uAE30\",children:(0,n.jsx)(s.span,{className:\"icon icon-link\"})}),\"\\uC804\\uC5ED\\uC73C\\uB85C \\uC0AC\\uC6A9\\uD558\\uAE30\"]}),`\n`,(0,n.jsxs)(s.p,{children:[\"\\uBA3C\\uC800, hook\\uC744 \\uC774\\uC6A9\\uD558\\uC5EC \\uCEF4\\uD3EC\\uB10C\\uD2B8\\uB97C \\uB744\\uC6CC\\uC57C \\uD558\\uAE30 \\uB54C\\uBB38\\uC5D0, \\uC804\\uC5ED\\uC801\\uC73C\\uB85C \\uC0AC\\uC6A9\\uD558\\uAE30 \\uC704\\uD55C \\uC138\\uD305\\uC774 \\uD544\\uC694\\uD588\\uB2E4.\",(0,n.jsx)(\"br\",{}),`\nuseContext\\uB97C \\uC774\\uC6A9\\uD558\\uC5EC \\uB9CC\\uB4E4\\uAE4C \\uD558\\uB2E4, \\uD504\\uB85C\\uC81D\\uD2B8 \\uB0B4\\uC5D0\\uC11C `,(0,n.jsx)(s.code,{children:\"recoil\"}),\"\\uC744 \\uC774\\uC6A9\\uC911\\uC774\\uAE30\\uC5D0, \",(0,n.jsx)(s.code,{children:\"recoil\"}),\"\\uC744 \\uC774\\uC6A9\\uD558\\uC5EC \\uD544\\uC694\\uD55C \\uB370\\uC774\\uD130\\uB97C \\uC804\\uB2EC\\uD558\\uAE30\\uB85C \\uD558\\uC600\\uACE0,\",(0,n.jsx)(\"br\",{}),`\n\\uD31D\\uC5C5\\uC744 \\uBAA8\\uB4E0 \\uD398\\uC774\\uC9C0\\uB0B4\\uC5D0\\uC11C \\uC0AC\\uC6A9\\uD560 \\uC218 \\uC788\\uC5B4\\uC57C \\uD558\\uAE30\\uC5D0, `,(0,n.jsx)(s.code,{children:\"PopupJs\"}),\"\\uB97C \\uB9CC\\uB4E4\\uC5B4 \",(0,n.jsx)(s.code,{children:\"App.tsx\"}),\"\\uC5D0 \\uB123\\uC5B4\\uC8FC\\uC5C8\\uB2E4.\",(0,n.jsx)(\"br\",{})]}),`\n`,(0,n.jsx)(s.pre,{children:(0,n.jsxs)(s.code,{className:\"hljs language-jsx\",children:[(0,n.jsx)(s.span,{className:\"hljs-keyword\",children:\"const\"}),\" \",(0,n.jsx)(s.span,{className:\"hljs-title function_\",children:\"PopupJs\"}),\" = (\",(0,n.jsx)(s.span,{className:\"hljs-params\"}),`) => {\n  `,(0,n.jsx)(s.span,{className:\"hljs-keyword\",children:\"const\"}),\" popupProps = \",(0,n.jsx)(s.span,{className:\"hljs-title function_\",children:\"useRecoilValue\"}),`(popupState);\n  `,(0,n.jsx)(s.span,{className:\"hljs-keyword\",children:\"const\"}),\" \",(0,n.jsx)(s.span,{className:\"hljs-title function_\",children:\"renderComponent\"}),\" = (\",(0,n.jsx)(s.span,{className:\"hljs-params\"}),`) => {\n    `,(0,n.jsx)(s.span,{className:\"hljs-keyword\",children:\"if\"}),` (!popupProps) {\n      `,(0,n.jsx)(s.span,{className:\"hljs-keyword\",children:\"return\"}),\" \",(0,n.jsx)(s.span,{className:\"hljs-literal\",children:\"null\"}),`;\n    }\n\n    `,(0,n.jsx)(s.span,{className:\"hljs-keyword\",children:\"return\"}),\" \",(0,n.jsx)(s.span,{className:\"xml\",children:(0,n.jsxs)(s.span,{className:\"hljs-tag\",children:[\"<\",(0,n.jsx)(s.span,{className:\"hljs-name\",children:\"PopupComponent\"}),\" {\",(0,n.jsx)(s.span,{className:\"hljs-attr\",children:\"...popupProps\"}),\"} />\"]})}),`;\n  };\n\n  `,(0,n.jsx)(s.span,{className:\"hljs-keyword\",children:\"return\"}),\" \",(0,n.jsxs)(s.span,{className:\"xml\",children:[(0,n.jsx)(s.span,{className:\"hljs-tag\",children:\"<>\"}),\"{renderComponent()}\",(0,n.jsx)(s.span,{className:\"hljs-tag\",children:\"</>\"})]}),`;\n};\n`]})}),`\n`,(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.code,{children:\"PopupJs\"}),\"\\uB294 \\uAC04\\uB2E8\\uD558\\uAC8C, \",(0,n.jsx)(s.code,{children:\"recoil\"}),\"\\uC5D0 \\uB123\\uC740 \\uB370\\uC774\\uD130\\uB97C \",(0,n.jsx)(s.code,{children:\"<PopupComponent/>\"}),\"\\uC5D0 \\uC804\\uB2EC\\uD558\\uC5EC \\uB80C\\uB354\\uB9C1 \\uD558\\uB294 \\uC5ED\\uD560\\uB9CC\\uC744 \\uC9C4\\uD589\\uD55C\\uB2E4.\",(0,n.jsx)(\"br\",{})]}),`\n`,(0,n.jsxs)(s.h1,{id:\"\\uB370\\uC774\\uD130-\\uC804\\uB2EC\\uD558\\uAE30\",children:[(0,n.jsx)(s.a,{className:\"anchor\",href:\"#\\uB370\\uC774\\uD130-\\uC804\\uB2EC\\uD558\\uAE30\",children:(0,n.jsx)(s.span,{className:\"icon icon-link\"})}),\"\\uB370\\uC774\\uD130 \\uC804\\uB2EC\\uD558\\uAE30\"]}),`\n`,(0,n.jsxs)(s.p,{children:[\"\\uD31D\\uC5C5\\uC5D0 \\uD544\\uC694\\uD55C \\uB370\\uC774\\uD130\\uB294 \",(0,n.jsx)(s.code,{children:\"recoil\"}),\"\\uC744 \\uC774\\uC6A9\\uD558\\uC5EC \\uC804\\uB2EC\\uD558\\uAE30\\uB85C \\uD558\\uC600\\uAE30\\uC5D0,\",(0,n.jsx)(\"br\",{})]}),`\n`,(0,n.jsx)(s.pre,{children:(0,n.jsxs)(s.code,{className:\"hljs language-jsx\",children:[(0,n.jsx)(s.span,{className:\"hljs-keyword\",children:\"export\"}),\" interface \",(0,n.jsx)(s.span,{className:\"hljs-title class_\",children:\"PopUpStateType\"}),` {\n  `,(0,n.jsx)(s.span,{className:\"hljs-attr\",children:\"message\"}),`: string;\n  `,(0,n.jsx)(s.span,{className:\"hljs-attr\",children:\"confirmText\"}),`: string;\n  cancelText?: string;\n  `,(0,n.jsx)(s.span,{className:\"hljs-attr\",children:\"handleClose\"}),\": \",(0,n.jsxs)(s.span,{className:\"hljs-function\",children:[\"(\",(0,n.jsx)(s.span,{className:\"hljs-params\",children:\"...arg: any[]\"}),\") =>\"]}),` any;\n  `,(0,n.jsx)(s.span,{className:\"hljs-attr\",children:\"handleConfirm\"}),\": \",(0,n.jsxs)(s.span,{className:\"hljs-function\",children:[\"(\",(0,n.jsx)(s.span,{className:\"hljs-params\",children:\"...arg: any[]\"}),\") =>\"]}),` any;\n  width?: string;\n  height?: string;\n}\n\n`,(0,n.jsx)(s.span,{className:\"hljs-keyword\",children:\"export\"}),\" \",(0,n.jsx)(s.span,{className:\"hljs-keyword\",children:\"const\"}),\" popupState = atom<\",(0,n.jsx)(s.span,{className:\"hljs-title class_\",children:\"PopUpStateType\"}),\" | \",(0,n.jsx)(s.span,{className:\"hljs-literal\",children:\"null\"}),`>({\n  `,(0,n.jsx)(s.span,{className:\"hljs-attr\",children:\"key\"}),\": \",(0,n.jsx)(s.span,{className:\"hljs-string\",children:\"'popupState'\"}),`,\n  `,(0,n.jsx)(s.span,{className:\"hljs-attr\",children:\"default\"}),\": \",(0,n.jsx)(s.span,{className:\"hljs-literal\",children:\"null\"}),`,\n});\n\n`]})}),`\n`,(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.code,{children:\"popupState\"}),\"\\uB97C \\uB9CC\\uB4E4\\uC5B4 \\uC8FC\\uC5C8\\uC73C\\uBA70, \\uC774\\uB97C hook\\uC73C\\uB85C \\uC774\\uC6A9\\uD558\\uC5EC \\uD31D\\uC5C5\\uC744 \\uCF1C\\uACE0, \\uB04C \\uC218 \\uC788\\uB3C4\\uB85D \",(0,n.jsx)(s.code,{children:\"usePopup\"}),\"\\uC744 \\uB9CC\\uB4E4\\uC5C8\\uB2E4.\",(0,n.jsx)(\"br\",{})]}),`\n`,(0,n.jsx)(s.pre,{children:(0,n.jsxs)(s.code,{className:\"hljs language-jsx\",children:[(0,n.jsx)(s.span,{className:\"hljs-keyword\",children:\"const\"}),\" \",(0,n.jsx)(s.span,{className:\"hljs-title function_\",children:\"usePopUp\"}),\" = (\",(0,n.jsx)(s.span,{className:\"hljs-params\"}),`) => {\n  `,(0,n.jsx)(s.span,{className:\"hljs-keyword\",children:\"const\"}),\" [popup, setPopup] = \",(0,n.jsx)(s.span,{className:\"hljs-title function_\",children:\"useRecoilState\"}),`(popupState);\n\n  `,(0,n.jsx)(s.span,{className:\"hljs-keyword\",children:\"const\"}),\" \",(0,n.jsx)(s.span,{className:\"hljs-title function_\",children:\"openPopup\"}),\" = (\",(0,n.jsx)(s.span,{className:\"hljs-params\",children:\"props: PopUpStateType\"}),`) => {\n    `,(0,n.jsx)(s.span,{className:\"hljs-title function_\",children:\"setPopup\"}),`(props);\n  };\n\n  `,(0,n.jsx)(s.span,{className:\"hljs-keyword\",children:\"const\"}),\" \",(0,n.jsx)(s.span,{className:\"hljs-title function_\",children:\"closePopup\"}),\" = (\",(0,n.jsx)(s.span,{className:\"hljs-params\"}),`) => {\n    `,(0,n.jsx)(s.span,{className:\"hljs-title function_\",children:\"setPopup\"}),\"(\",(0,n.jsx)(s.span,{className:\"hljs-literal\",children:\"null\"}),`);\n  };\n\n  `,(0,n.jsx)(s.span,{className:\"hljs-keyword\",children:\"return\"}),` { openPopup, closePopup };\n};\n\n`,(0,n.jsx)(s.span,{className:\"hljs-keyword\",children:\"export\"}),\" \",(0,n.jsx)(s.span,{className:\"hljs-keyword\",children:\"default\"}),` usePopUp;\n`]})}),`\n`,(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.code,{children:\"usePopUp\"}),\"\\uC740 \\uAC04\\uB2E8\\uD558\\uAC8C, recoil\\uC758 \\uB370\\uC774\\uD130\\uB97C \\uBCC0\\uACBD \\uBC0F \\uC81C\\uAC70 \\uD558\\uB294 \\uC5ED\\uD560\\uB9CC \\uC9C4\\uD589\\uD55C\\uB2E4.\",(0,n.jsx)(\"br\",{})]}),`\n`,(0,n.jsxs)(s.h1,{id:\"\\uC0AC\\uC6A9\\uD558\\uAE30\",children:[(0,n.jsx)(s.a,{className:\"anchor\",href:\"#\\uC0AC\\uC6A9\\uD558\\uAE30\",children:(0,n.jsx)(s.span,{className:\"icon icon-link\"})}),\"\\uC0AC\\uC6A9\\uD558\\uAE30\"]}),`\n`,(0,n.jsx)(s.pre,{children:(0,n.jsxs)(s.code,{className:\"hljs language-jsx\",children:[(0,n.jsx)(s.span,{className:\"hljs-keyword\",children:\"const\"}),\" { openPopup, closePopup } = \",(0,n.jsx)(s.span,{className:\"hljs-title function_\",children:\"usePopUp\"}),`();\n\n`,(0,n.jsx)(s.span,{className:\"hljs-title function_\",children:\"openPopup\"}),`({\n  `,(0,n.jsx)(s.span,{className:\"hljs-attr\",children:\"message\"}),\": \",(0,n.jsx)(s.span,{className:\"hljs-string\",children:\"'\\uD31D\\uC5C5\\uC5D0 \\uB4E4\\uC5B4\\uAC08 \\uBA54\\uC138\\uC9C0'\"}),`,\n  `,(0,n.jsx)(s.span,{className:\"hljs-attr\",children:\"confirmText\"}),\": \",(0,n.jsx)(s.span,{className:\"hljs-string\",children:\"'\\uD655\\uC778'\"}),`,\n  handleClose,\n  handleConfirm,,\n});\n`]})}),`\n`,(0,n.jsxs)(s.p,{children:[\"\\uC774\\uB807\\uAC8C \\uD558\\uC5EC \\uAC04\\uB2E8\\uD558\\uAC8C usePopUp hook\\uC744 \\uAD6C\\uD604\\uD558\\uC5EC \\uC0AC\\uC6A9\\uD574 \\uBCFC \\uC218 \\uC788\\uB2E4.\",(0,n.jsx)(\"br\",{}),`\n\\uC774\\uB97C \\uC751\\uC6A9\\uD558\\uBA74 \\uB2E4\\uC591\\uD55C \\uD31D\\uC5C5\\uC744 \\uAD6C\\uD604\\uD560 \\uC218 \\uC788\\uB2E4.`]})]})}function P(e={}){let{wrapper:s}=e.components||{};return s?(0,n.jsx)(s,Object.assign({},e,{children:(0,n.jsx)(i,e)})):i(e)}var x=P;return k(w);})();\n;return Component;"
  },
  "_id": "blog/2023/05/usePopup.mdx",
  "_raw": {
    "sourceFilePath": "blog/2023/05/usePopup.mdx",
    "sourceFileName": "usePopup.mdx",
    "sourceFileDir": "blog/2023/05",
    "contentType": "mdx",
    "flattenedPath": "blog/2023/05/usePopup"
  },
  "type": "Post",
  "slug": "usePopup"
}